<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine</title>

  <!-- Pixel font (como el original) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    :root{
      --bgTop:#0b1328;
      --bgMid:#0c2a55;
      --bgBot:#0a3a7a;

      --pink:#ff4aa2;
      --pink2:#ff7bbf;
      --red:#ff2f63;

      --white:#f7f7fb;
      --shadow: rgba(0,0,0,.25);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      overflow:hidden;
      background:
        radial-gradient(900px 520px at 50% 35%, rgba(255,255,255,.08), transparent 60%),
        linear-gradient(180deg, var(--bgTop) 0%, var(--bgMid) 55%, var(--bgBot) 100%);
      font-family: "Press Start 2P", system-ui, sans-serif;
      color:#fff;
    }

    /* Lluvia de corazones */
    #rain{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:1;
    }
    .heart{
      position:absolute;
      top:-10vh;
      will-change: transform;
      animation-name: fall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      filter: drop-shadow(0 6px 8px rgba(0,0,0,.25));
      opacity:.95;
      user-select:none;
    }
    @keyframes fall{
      to { transform: translate3d(0, 120vh, 0); }
    }

    /* Layout */
    .stage{
      position:relative;
      z-index:2;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      text-align:center;
    }

    /* Pantalla 1 */
    .title{
      font-size: clamp(28px, 6vw, 64px);
      letter-spacing:.08em;
      color:#ff5c8f;
      text-shadow:
        0 4px 0 rgba(0,0,0,.25),
        0 0 18px rgba(255,80,150,.25);
      margin:0 0 18px 0;
      position:relative;
      display:inline-block;
    }
    .title::before,
    .title::after{
      content:"üíó";
      font-size: clamp(18px, 3vw, 30px);
      position:absolute;
      top: 50%;
      transform: translateY(-55%);
      filter: drop-shadow(0 4px 6px rgba(0,0,0,.25));
    }
    .title::before{ left:-54px; }
    .title::after{ right:-54px; }

    .subtitle{
      margin:0;
      font-size: clamp(10px, 2.2vw, 14px);
      color: rgba(255,255,255,.75);
      text-shadow: 0 3px 0 rgba(0,0,0,.20);
    }

    /* Pantalla 2 - tarjeta */
    .card{
      width:min(680px, 100%);
      background: var(--white);
      color:#1a1a1a;
      border-radius: 14px;
      padding: 26px 18px 22px;
      box-shadow: 0 18px 50px var(--shadow);
      position:relative;
      margin: 0 auto;
    }

    /* doble borde rosa como el screenshot */
    .card::before{
      content:"";
      position:absolute;
      inset:-12px;
      border-radius: 18px;
      border: 6px solid var(--pink2);
      box-shadow: 0 0 0 4px rgba(255,255,255,.35) inset;
      opacity:.95;
      pointer-events:none;
    }
    .card::after{
      content:"";
      position:absolute;
      inset:-20px;
      border-radius: 22px;
      border: 6px solid var(--pink);
      opacity:.85;
      pointer-events:none;
    }

    .card h2{
      margin: 0 0 14px;
      color: var(--red);
      font-size: clamp(18px, 3vw, 34px);
      line-height:1.05;
      text-shadow: 0 3px 0 rgba(0,0,0,.08);
    }

    .card p{
      margin: 10px 0;
      font-size: clamp(10px, 2vw, 14px);
      line-height:1.6;
      color:#2a2a2a;
    }

    .btnRow{
      margin-top: 22px;
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      position:relative;
      min-height: 62px;
    }

    button{
      font-family: "Press Start 2P", system-ui, sans-serif;
      cursor:pointer;
      border:none;
      padding: 14px 16px;
      border-radius: 12px;
      font-size: 12px;
      letter-spacing:.02em;
      transition: transform .08s ease;
      user-select:none;
    }
    button:hover{ transform: translateY(-1px); }

    .yes{
      background: linear-gradient(180deg, #ff69a8, #ff2f63);
      color:#13040a;
      box-shadow: 0 10px 22px rgba(255,60,120,.25);
      min-width: 140px;
    }
    .no{
      background: rgba(15,20,35,.10);
      border: 3px solid rgba(0,0,0,.12);
      color:#222;
      min-width: 140px;

      /* se posiciona dentro del contenedor y ‚Äúescapa‚Äù */
      position:absolute;
      left: calc(50% + 160px);
      top: 0;
    }

    /* Estado */
    .hidden{ display:none !important; }

    /* Footer */
    footer{
      position:fixed;
      left:0; right:0;
      bottom: 14px;
      display:flex;
      justify-content:center;
      z-index:3;
      pointer-events:none;
    }
    .tag{
      pointer-events:none;
      font-size: 10px;
      color: rgba(255,255,255,.7);
      background: rgba(0,0,0,.28);
      border: 2px solid rgba(255,255,255,.18);
      padding: 8px 10px;
      border-radius: 10px;
      box-shadow: 0 10px 24px rgba(0,0,0,.20);
    }
  </style>
</head>

<body>
  <!-- Lluvia -->
  <div id="rain" aria-hidden="true"></div>

  <div class="stage">
    <div id="screenStart">
      <h1 class="title">VALENTINE</h1>
      <p class="subtitle">Presiona cualquier tecla para comenzar...</p>
    </div>

    <div id="screenAsk" class="hidden" style="width:min(680px,100%);">
      <div class="card">
        <div style="margin-bottom:16px;">
          <div id="question" class="subtitle" style="color:#1a1a1a; text-shadow:none; font-size:14px;"></div>
        </div>

        <div class="btnRow" id="btnRow">
          <button class="yes" id="yes">S√ç</button>
          <button class="no" id="no">NO</button>
        </div>

        <p style="margin-top:16px; color:#444; font-size:10px;">Tip: el NO no te va a dejar üòå</p>
      </div>
    </div>

    <div id="screenThanks" class="hidden" style="width:min(680px,100%);">
      <div class="card">
        <h2>Gracias mi amor por aceptar</h2>
        <p>Te amo, Feliz San Valent√≠n</p>
        <p>¬øVamos a tomar el t√© juntos? Estoy afuera ‚òï</p>
      </div>
    </div>
  </div>

  <footer>
    <div class="tag">222 made with much love by nico</div>
  </footer>

  <script>
    // Params
    const qs = new URLSearchParams(location.search);
    const to = (qs.get("to") || "mi amor").trim();

    // Texto con ‚Äúquer√©s‚Äù
    document.getElementById("question").textContent =
      `¬ø${to}, quer√©s ser mi Valentine?`;

    // Pantallas
    const screenStart = document.getElementById("screenStart");
    const screenAsk = document.getElementById("screenAsk");
    const screenThanks = document.getElementById("screenThanks");

    let started = false;
    function startFlow(){
      if(started) return;
      started = true;
      screenStart.classList.add("hidden");
      screenAsk.classList.remove("hidden");
    }

    window.addEventListener("keydown", startFlow, { once:true });
    window.addEventListener("pointerdown", startFlow, { once:true });

    // Bot√≥n NO que se escapa
    const noBtn = document.getElementById("no");
    const yesBtn = document.getElementById("yes");
    const row = document.getElementById("btnRow");
    let escapes = 0;

    function moveNo(){
      const r = row.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const pad = 6;

      // l√≠mites dentro del contenedor
      const maxX = Math.max(pad, r.width - b.width - pad);
      const maxY = Math.max(pad, 42);

      const x = pad + Math.random() * maxX;
      const y = pad + Math.random() * maxY;

      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";

      escapes++;
      const scale = Math.min(1 + escapes * 0.06, 1.45);
      yesBtn.style.transform = `scale(${scale})`;
    }

    noBtn.addEventListener("mouseenter", moveNo);
    noBtn.addEventListener("focus", moveNo);
    noBtn.addEventListener("pointerdown", (e)=>{ e.preventDefault(); moveNo(); });

    // Aceptar
    yesBtn.addEventListener("click", ()=>{
      screenAsk.classList.add("hidden");
      screenThanks.classList.remove("hidden");
    });

    // ---- Lluvia de corazones (como el screenshot) ----
    const rain = document.getElementById("rain");
    const COLORS = ["#ff2f63", "#ff4aa2", "#ff7bbf", "#ff5c8f"];

    function spawnHeart(){
      const el = document.createElement("div");
      el.className = "heart";

      const left = Math.random() * 100;               // vw
      const size = 10 + Math.random() * 18;           // px
      const dur = 4.5 + Math.random() * 6.5;          // s
      const delay = Math.random() * 2.5;              // s
      const drift = (Math.random() * 60 - 30);        // px sideways slight
      const color = COLORS[(Math.random()*COLORS.length)|0];
      const opacity = 0.55 + Math.random() * 0.45;

      el.style.left = left + "vw";
      el.style.fontSize = size + "px";
      el.style.color = color;
      el.style.opacity = opacity;
      el.style.animationDuration = dur + "s";
      el.style.animationDelay = (-delay) + "s"; // arranca ya ‚Äúen medio‚Äù

      // drift lateral suave
      el.animate(
        [
          { transform: `translate3d(${drift}px, -10vh, 0)` },
          { transform: `translate3d(${-drift}px, 120vh, 0)` }
        ],
        { duration: dur * 1000, iterations: Infinity, easing: "linear" }
      );

      // emoji coraz√≥n (pixel vibe)
      el.textContent = "‚ù§";

      rain.appendChild(el);
      return el;
    }

    // Generamos una ‚Äúlluvia‚Äù densa como el original
    const HEARTS = 42;
    const nodes = [];
    for(let i=0;i<HEARTS;i++){
      nodes.push(spawnHeart());
    }

    // Si la pesta√±a queda mucho tiempo, refrescamos posiciones cada tanto (para que no se ‚Äúacomoden‚Äù)
    setInterval(()=>{
      for(const el of nodes){
        el.style.left = (Math.random()*100) + "vw";
      }
    }, 6000);
  </script>
</body>
</html>
